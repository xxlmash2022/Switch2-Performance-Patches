<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Switch 2 – Performance Patches & Neue Spiele</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root { --bg:#0b0e11; --card:#12161c; --text:#e6edf3; --muted:#9aa7b2; --accent:#26c281; --table:#1f2630; }
    html,body{ background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial; margin:0; }
    header{ padding:24px 20px 10px; }
    h1{ font-size:1.6rem; margin:0; display:flex; gap:.5rem; align-items:baseline; flex-wrap:wrap; }
    .date{ color:var(--muted); font-size:.95rem; font-weight:500; }
    .tabs{ display:flex; gap:8px; padding:0 20px 12px; flex-wrap:wrap; }
    .tab-btn{ background:var(--card); border:1px solid var(--table); color:var(--text); padding:8px 12px; border-radius:999px; cursor:pointer; font-weight:600; }
    .tab-btn[aria-selected="true"]{ outline:2px solid var(--accent); }
    .wrap{ padding:0 20px 28px; }
    .table-card{ background:var(--card); border:1px solid var(--table); border-radius:14px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,.35); }
    table{ width:100%; border-collapse:collapse; }
    thead th{ text-align:left; padding:14px 12px; font-size:.92rem; color:var(--muted); border-bottom:1px solid var(--table); font-weight:600; }
    tbody td{ padding:10px 12px; border-bottom:1px solid var(--table); vertical-align:middle; }
    tbody tr:hover{ background:rgba(255,255,255,.02); }
    .thumb{ width:270px; height:153px; border-radius:8px; object-fit:cover; display:block; border:1px solid #222b36; }
    .game a{ color:var(--text); text-decoration:none; font-weight:600; }
    .game a:hover{ text-decoration:underline; }
    .kernCell{ color:var(--text); }
    .source a{ color:var(--muted); text-decoration:none; }
    .source a:hover{ text-decoration:underline; }
    .hidden{ display:none; }
    .foot{ color:var(--muted); font-size:.9rem; margin-top:14px; line-height:1.5; }
    .toolbar{ display:flex; align-items:center; gap:10px; margin: 8px 0 16px; }
    .btn{ background:#0f703f; border:1px solid #145a31; color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }
    .note{ color:var(--muted); font-size:.9rem; }
  </style>
</head>
<body>
  <header>
    <h1>Performance&nbsp;Patches: <span id="count1">0</span> <span class="date">• Stand: <time id="today">20.08.2025</time></span></h1>
  </header>

  <nav class="tabs" role="tablist" aria-label="Listenwahl">
    <button class="tab-btn" role="tab" id="tab-perf" aria-selected="true" aria-controls="panel-perf">Performance-Patches</button>
    <button class="tab-btn" role="tab" id="tab-new" aria-selected="false" aria-controls="panel-new">Neue Switch 2 Spiele</button>
  </nav>

  <div class="wrap">
    <!-- Panel 1: Performance Patches -->
    <section id="panel-perf" class="table-card" role="tabpanel" aria-labelledby="tab-perf">
      <table id="games1">
        <thead>
          <tr><th>Thumbnail</th><th>Spiel (Nintendo DE bevorzugt)</th><th>Kern‑Patch‑Inhalte</th><th>Quelle</th></tr>
        </thead>
        <tbody>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/ARMS-1173200.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/a/arms-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_Arms_image1600w.jpg" alt="Thumbnail ARMS"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/ARMS-1173200.html" target="_blank" rel="noopener">ARMS</a></td>
  <td class="kernCell">Visuelle Optimierung, stabilere Framerate, HDR (TV)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/ARMS-1173200.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Captain-Toad-Treasure-Tracker-1348071.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/c/captain-toad-treasure-tracker-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_CaptainToadTreasureTracker_image1600w.png" alt="Thumbnail Captain Toad: Treasure Tracker"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Captain-Toad-Treasure-Tracker-1348071.html" target="_blank" rel="noopener">Captain Toad: Treasure Tracker</a></td>
  <td class="kernCell">Visuelle Optimierung, HDR (TV)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Captain-Toad-Treasure-Tracker-1348071.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Download-Software/Spielestudio-1964648.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/g/game-builder-garage-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_download_software_1/H2x1_NSwitchDS_GameBuilderGarage_deDE_image1600w.jpg" alt="Thumbnail Spielestudio (Game Builder Garage)"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Download-Software/Spielestudio-1964648.html" target="_blank" rel="noopener">Spielestudio (Game Builder Garage)</a></td>
  <td class="kernCell">Visuelle Optimierung (höhere Bildqualität)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Download-Software/Spielestudio-1964648.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/New-Super-Mario-Bros-U-Deluxe-1438640.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/n/new-super-mario-bros-u-deluxe-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_NewSuperMarioBrosUDeluxe_image1600w.jpg" alt="Thumbnail New Super Mario Bros. U Deluxe"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/New-Super-Mario-Bros-U-Deluxe-1438640.html" target="_blank" rel="noopener">New Super Mario Bros. U Deluxe</a></td>
  <td class="kernCell">Visuelle Optimierung (höhere Bildqualität)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/New-Super-Mario-Bros-U-Deluxe-1438640.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Pokemon-Karmesin-2179556.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/p/pokemon-scarlet-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/2x1_NSwitch_PokemonScarletViolet_Scarlet_deDE_image1600w.jpg" alt="Thumbnail Pokémon Karmesin"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Pokemon-Karmesin-2179556.html" target="_blank" rel="noopener">Pokémon Karmesin</a></td>
  <td class="kernCell">Visuelle Optimierung, höhere FPS</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Pokemon-Karmesin-2179556.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Pokemon-Purpur-2179557.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/p/pokemon-violet-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/2x1_NSwitch_PokemonScarletViolet_Violet_deDE_image1600w.jpg" alt="Thumbnail Pokémon Purpur"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Pokemon-Purpur-2179557.html" target="_blank" rel="noopener">Pokémon Purpur</a></td>
  <td class="kernCell">Visuelle Optimierung, höhere FPS</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Pokemon-Purpur-2179557.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Splatoon-3-2008811.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/s/splatoon-3-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_Splatoon3_image1600w.jpg" alt="Thumbnail Splatoon 3"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Splatoon-3-2008811.html" target="_blank" rel="noopener">Splatoon 3</a></td>
  <td class="kernCell">Visuelle Optimierung, flüssigeres Bewegen im Hub</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Splatoon-3-2008811.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Super-Mario-3D-World-Bowser-s-Fury-1832228.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/s/super-mario-3d-world-bowsers-fury-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_SuperMario3DWorldBowsersFury_image1600w.jpg" alt="Thumbnail Super Mario 3D World + Bowser’s Fury"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Super-Mario-3D-World-Bowser-s-Fury-1832228.html" target="_blank" rel="noopener">Super Mario 3D World + Bowser’s Fury</a></td>
  <td class="kernCell">Visuelle Optimierung, bessere FPS; HDR (nur Bowser’s Fury)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Super-Mario-3D-World-Bowser-s-Fury-1832228.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Super-Mario-Odyssey-1173332.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/s/super-mario-odyssey-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_SuperMarioOdyssey_image1600w.jpg" alt="Thumbnail Super Mario Odyssey"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Super-Mario-Odyssey-1173332.html" target="_blank" rel="noopener">Super Mario Odyssey</a></td>
  <td class="kernCell">Visuelle Optimierung, HDR (TV)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Super-Mario-Odyssey-1173332.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/The-Legend-of-Zelda-Echoes-of-Wisdom-2590490.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/t/the-legend-of-zelda-echoes-of-wisdom-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/2x1_NSwitch_TheLegendofZeldaEchoesOfWisdom_image1600w.jpg" alt="Thumbnail The Legend of Zelda: Echoes of Wisdom"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/The-Legend-of-Zelda-Echoes-of-Wisdom-2590490.html" target="_blank" rel="noopener">The Legend of Zelda: Echoes of Wisdom</a></td>
  <td class="kernCell">Visuelle Optimierung, HDR (TV)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/The-Legend-of-Zelda-Echoes-of-Wisdom-2590490.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/The-Legend-of-Zelda-Link-s-Awakening-1514327.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/t/the-legend-of-zelda-links-awakening-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_TheLegendOfZeldaLinksAwakening_image1600w.jpg" alt="Thumbnail The Legend of Zelda: Link’s Awakening"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/The-Legend-of-Zelda-Link-s-Awakening-1514327.html" target="_blank" rel="noopener">The Legend of Zelda: Link’s Awakening</a></td>
  <td class="kernCell">Visuelle Optimierung, HDR (TV)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/The-Legend-of-Zelda-Link-s-Awakening-1514327.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Fortnite-1510812.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/f/fortnite-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_Fortnite_image1600w.jpg" alt="Thumbnail Fortnite"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Fortnite-1510812.html" target="_blank" rel="noopener">Fortnite</a></td>
  <td class="kernCell">60 FPS, höhere Auflösung, zusätzliche Systeme‑Features</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Fortnite-1510812.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Apex-Legends--1910595.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/a/apex-legends-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_ApexLegends_image1600w.jpg" alt="Thumbnail Apex Legends"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Apex-Legends--1910595.html" target="_blank" rel="noopener">Apex Legends</a></td>
  <td class="kernCell">Bis 60 FPS; 1080p (Dock) / 1792×1008 (Handheld)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/Apex-Legends--1910595.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/No-Man-s-Sky-2197037.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/n/no-mans-sky-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/H2x1_NSwitch_NoMansSky_image1600w.jpg" alt="Thumbnail No Man’s Sky"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/No-Man-s-Sky-2197037.html" target="_blank" rel="noopener">No Man’s Sky</a></td>
  <td class="kernCell">Enhanced Visuals, Multiplayer u. Features (Switch‑2‑Upgrade‑Pack)</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/No-Man-s-Sky-2197037.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
<tr>
  <td><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/DRAGON-QUEST-III-HD-2D-Remake-2639673.html" target="_blank" rel="noopener"><img class="thumb" src="https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/d/dragon-quest-iii-hd-2d-remake-switch/hero" data-alt1="https://www.nintendo.com/eu/media/images/10_share_images/games_15/nintendo_switch_4/2x1_NSwitch_DRAGONQUESTIIIHD2DRemake_image1600w.jpg" alt="Thumbnail DRAGON QUEST III HD‑2D Remake"></a></td>
  <td class="game"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/DRAGON-QUEST-III-HD-2D-Remake-2639673.html" target="_blank" rel="noopener">DRAGON QUEST III HD‑2D Remake</a></td>
  <td class="kernCell">Performance‑Update: schärfere Grafik + Anzeigemodi</td>
  <td class="source"><a href="https://www.nintendo.com/de-de/Spiele/Nintendo-Switch-Spiele/DRAGON-QUEST-III-HD-2D-Remake-2639673.html" target="_blank" rel="noopener">Nintendo DE</a></td>
</tr>
        </tbody>
      </table>
    </section>

    <!-- Panel 2: Neue Switch 2 Spiele -->
    <section id="panel-new" class="table-card hidden" role="tabpanel" aria-labelledby="tab-new">
      <div class="toolbar">
        <button id="loadNew" class="btn">Nintendo‑Liste laden</button>
        <span id="newCount" class="note">Noch nicht geladen</span>
      </div>
      <table id="games2">
        <thead>
          <tr><th>Thumbnail</th><th>Spiel (Nintendo DE bevorzugt)</th><th>Kern‑Patch‑Inhalte</th><th>Quelle</th></tr>
        </thead>
        <tbody>
          <!-- Wird dynamisch geladen -->
        </tbody>
      </table>
      <div id="newNote" class="foot">Die Liste wird live aus dem Nintendo‑Shop geladen (DE bevorzugt, US‑Fallback). Falls dein Browser die Anfrage wegen CORS blockt, erscheint hier ein Hinweis.</div>
    </section>

    <p class="foot">
      Regeln: Links & Thumbnails vorrangig vom deutschen Nintendo‑Shop. Liefert ein DE‑Link 404 (<code>/de-de/404.html</code>), wird automatisch auf die US‑Shop‑Seite umgeschaltet und deren Hero‑Bild als Thumbnail genutzt. Thumbnails sind Pflicht.
    </p>
  </div>

  <script>
    // Datum dynamisch (de-DE)
    try { document.getElementById('today').textContent = new Intl.DateTimeFormat('de-DE').format(new Date()); } catch(e){}

    // Bild-Fallback pro Thumbnail: primary (US hero) → EU share image
    document.querySelectorAll('#games1 img.thumb').forEach(img => {
      let switched = false;
      img.onerror = () => {
        if (!switched && img.dataset.alt1) { img.src = img.dataset.alt1; switched = true; }
      };
    });

    // Zähler Panel 1
    document.getElementById('count1').textContent = document.querySelectorAll('#games1 tbody tr').length;

    // Tabs
    const tabPerf = document.getElementById('tab-perf');
    const tabNew  = document.getElementById('tab-new');
    const panelPerf = document.getElementById('panel-perf');
    const panelNew  = document.getElementById('panel-new');
    function select(tab) {
      const isPerf = tab.id === 'tab-perf';
      tabPerf.setAttribute('aria-selected', isPerf);
      tabNew.setAttribute('aria-selected', !isPerf);
      panelPerf.classList.toggle('hidden', !isPerf);
      panelNew.classList.toggle('hidden', isPerf);
    }
    tabPerf.addEventListener('click', () => select(tabPerf));
    tabNew.addEventListener('click',  () => select(tabNew));

    // --- Neue Switch‑2‑Spiele: Live-Lader ---
    const loadBtn = document.getElementById('loadNew');
    const newCount = document.getElementById('newCount');
    const newBody = document.querySelector('#games2 tbody');
    const newNote = document.getElementById('newNote');

    function rowHtml(entry) {
      const link = entry.de || entry.us || '#';
      const label = entry.de ? 'Nintendo DE' : (entry.us ? 'Nintendo US' : 'Nintendo');
      const img = entry.img_primary || entry.img_fallback || '';
      const alt1 = entry.img_fallback || '';
      const kern = entry.kern || '—';
      return `<tr>
        <td><a href="${link}" target="_blank" rel="noopener"><img class="thumb" src="${img}" data-alt1="${alt1}" alt="Thumbnail ${entry.name || ''}"></a></td>
        <td class="game"><a href="${link}" target="_blank" rel="noopener">${entry.name || 'Unbekannt'}</a></td>
        <td class="kernCell">${kern}</td>
        <td class="source"><a href="${link}" target="_blank" rel="noopener">${label}</a></td>
      </tr>`;
    }

    async function tryFetchText(url) {
      const r = await fetch(url, { mode: 'cors' });
      if (!r.ok) throw new Error('HTTP '+r.status);
      return await r.text();
    }

    function extractUSItemsFromHtml(html) {
      // Heuristische Extraktion aus dem US "Nintendo Switch 2 games" Storelisting
      // Sucht nach JSON fragments like data-state or application/json embedded
      const entries = [];
      const re = /"title":"([^"]+?)","url":"(\/us\/store\/products\/[^"]+?)"/g;
      let m;
      const seen = new Set();
      while ((m = re.exec(html)) && entries.length < 100) {
        const name = m[1];
        const url = "https://www.nintendo.com" + m[2];
        if (seen.has(url)) continue;
        seen.add(url);
        // Construct hero guess
        const slug = m[2].split('/').filter(Boolean).pop();
        const hero = `https://assets.nintendo.com/image/upload/f_auto/q_auto/ncom/en_US/games/switch/${slug[0]}/${slug}/hero`;
        entries.push({ name, us: url, img_primary: hero });
      }
      return entries;
    }

    async function loadNewList() {
      loadBtn.disabled = true; newNote.textContent = 'Lade Liste…';
      try {
        // 1) Versuche DE-Kategorieseite (falls vorhanden)
        // (Viele DE-Seiten werden dynamisch geladen; wir springen direkt zu US als verlässlicher Fallback.)
        // 2) US Listing
        const usUrl = 'https://www.nintendo.com/us/store/games/nintendo-switch-2-games/';
        let html = await tryFetchText(usUrl);
        let items = extractUSItemsFromHtml(html);
        if (items.length < 10) {
          // 3) Optional zweiter Versuch mit Query-Param sort/filter
          html = await tryFetchText(usUrl + '?sort=featured');
          items = extractUSItemsFromHtml(html);
        }
        if (items.length === 0) throw new Error('Kein Listing extrahiert (CORS/Markup).');

        // Renderen
        newBody.innerHTML = items.map(rowHtml).join('\n');
        // Bild-Fallbacks im Tab 2 aktivieren
        newBody.querySelectorAll('img.thumb').forEach(img => {
          let switched = false;
          img.onerror = () => {
            if (!switched && img.dataset.alt1) { img.src = img.dataset.alt1; switched = true; }
          };
        });

        newCount.textContent = 'Anzahl: ' + items.length + ' (Nintendo‑US Listing)';
        newNote.textContent = 'Hinweis: Live aus dem Nintendo‑Store geladen. Zahlen können sich ändern.';
      } catch (err) {
        console.error(err);
        newNote.textContent = 'Konnte die Liste nicht automatisch laden (CORS/Markup). Du kannst die Seite manuell öffnen und die Spiele ergänzen.';
        newCount.textContent = 'Fehler beim Laden';
      } finally {
        loadBtn.disabled = false;
      }
    }

    loadBtn.addEventListener('click', loadNewList);
  </script>
</body>
</html>
